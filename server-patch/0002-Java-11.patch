From f568e681344c4606f84e795a1c691daf441bc325 Mon Sep 17 00:00:00 2001
From: Firestarter <w@william.gg>
Date: Wed, 31 Mar 2021 15:29:17 +1000
Subject: [PATCH] Java 11

---
 pom.xml | 34 ++++++++++++++++++++--------------
 1 file changed, 20 insertions(+), 14 deletions(-)

diff --git a/pom.xml b/pom.xml
index d45c7a67..f2d9be9d 100644
--- a/pom.xml
+++ b/pom.xml
@@ -16,8 +16,8 @@
         <buildtag.prefix>git-Bukkit-</buildtag.prefix>
         <buildtag.suffix></buildtag.suffix>
         <maven.build.timestamp.format>yyyyMMdd-HHmm</maven.build.timestamp.format>
-        <maven.compiler.source>1.8</maven.compiler.source>
-        <maven.compiler.target>1.8</maven.compiler.target>
+        <maven.compiler.source>11</maven.compiler.source>
+        <maven.compiler.target>11</maven.compiler.target>
     </properties>
 
     <parent>
@@ -211,7 +211,7 @@
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-shade-plugin</artifactId>
-                <version>3.1.0</version>
+                <version>3.2.4</version>
                 <executions>
                     <execution>
                         <phase>package</phase>
@@ -219,12 +219,13 @@
                             <goal>shade</goal>
                         </goals>
                         <configuration>
-                            <dependencyReducedPomLocation>${project.build.directory}/dependency-reduced-pom.xml</dependencyReducedPomLocation> <!-- Paper -->
+                            <dependencyReducedPomLocation>${project.build.directory}/dependency-reduced-pom.xml
+                            </dependencyReducedPomLocation> <!-- Paper -->
                             <relocations>
                                 <!-- Paper - Workaround for hardcoded path lookup in dependency, easier than forking it - GH-189 -->
                                 <!--<relocation>-->
-                                    <!--<pattern>joptsimple</pattern>-->
-                                    <!--<shadedPattern>org.bukkit.craftbukkit.libs.joptsimple</shadedPattern>-->
+                                <!--<pattern>joptsimple</pattern>-->
+                                <!--<shadedPattern>org.bukkit.craftbukkit.libs.joptsimple</shadedPattern>-->
                                 <!--</relocation>-->
                                 <relocation>
                                     <pattern>jline</pattern>
@@ -232,8 +233,8 @@
                                 </relocation>
                                 <!-- Paper - Don't relocate fastutil in order to prevent api breakage -->
                                 <!--<relocation>-->
-                                    <!--<pattern>it.unimi</pattern>-->
-                                    <!--<shadedPattern>org.bukkit.craftbukkit.libs.it.unimi</shadedPattern>-->
+                                <!--<pattern>it.unimi</pattern>-->
+                                <!--<shadedPattern>org.bukkit.craftbukkit.libs.it.unimi</shadedPattern>-->
                                 <!--</relocation>-->
                                 <relocation>
                                     <pattern>org.bukkit.craftbukkit</pattern>
@@ -248,10 +249,13 @@
                                 </relocation>
                             </relocations>
                             <transformers>
-                                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
+                                <transformer
+                                        implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                     <resource>META-INF/services/java.sql.Driver</resource>
                                 </transformer>
-                                <transformer implementation="com.github.edwgiz.mavenShadePlugin.log4j2CacheTransformer.PluginsCacheFileTransformer" />
+                                <transformer
+                                        implementation="com.github.edwgiz.maven_shade_plugin.log4j2_cache_transformer.PluginsCacheFileTransformer"/>
+
                             </transformers>
                         </configuration>
                     </execution>
@@ -260,14 +264,14 @@
                     <dependency>
                         <groupId>com.github.edwgiz</groupId>
                         <artifactId>maven-shade-plugin.log4j2-cachefile-transformer</artifactId>
-                        <version>2.8.1</version>
+                        <version>2.14.0</version>
                     </dependency>
                 </dependencies>
             </plugin>
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-compiler-plugin</artifactId>
-                <version>3.7.0</version>
+                <version>3.8.1</version>
             </plugin>
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
@@ -294,7 +298,8 @@
             <!-- Paper end -->
             <build>
                 <plugins>
-                    <plugin>
+                    <!-- Paper11 Start // AFAIK animal-sniffer-maven-plugin has no point after JDK 9 (https://github.com/mojohaus/animal-sniffer/issues/62#issuecomment-459021078) -->
+                    <!--<plugin>
                         <groupId>org.codehaus.mojo</groupId>
                         <artifactId>animal-sniffer-maven-plugin</artifactId>
                         <version>1.16</version>
@@ -313,7 +318,8 @@
                                 <version>1.0</version>
                             </signature>
                         </configuration>
-                    </plugin>
+                    </plugin>-->
+                    <!-- Paper11 End -->
                 </plugins>
             </build>
         </profile>
-- 
2.31.1

